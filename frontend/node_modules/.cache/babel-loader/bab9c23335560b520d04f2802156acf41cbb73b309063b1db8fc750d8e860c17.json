{"ast":null,"code":"var _jsxFileName = \"/workspaces/TrustFlow-App/frontend/src/pages/SubmitTestimonial.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { supabase } from '@/lib/supabase';\nimport { Heart, Video, FileText, Star, Loader2, CheckCircle, Camera, RotateCcw, Upload, ArrowLeft } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { v4 as uuidv4 } from 'uuid';\nimport confetti from 'canvas-confetti';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SubmitTestimonial = () => {\n  _s();\n  const {\n    slug\n  } = useParams();\n  const [space, setSpace] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [step, setStep] = useState('welcome'); // welcome, video, text, details, uploading, success\n  const [testimonialType, setTestimonialType] = useState(null);\n  const [rating, setRating] = useState(5);\n  const [hoverRating, setHoverRating] = useState(0);\n  const [content, setContent] = useState('');\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const {\n    toast\n  } = useToast();\n\n  // Video recording state\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordedBlob, setRecordedBlob] = useState(null);\n  const [recordedUrl, setRecordedUrl] = useState(null);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const videoRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const streamRef = useRef(null);\n  const timerRef = useRef(null);\n  useEffect(() => {\n    fetchSpace();\n    return () => {\n      // Cleanup camera on unmount\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach(track => track.stop());\n      }\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [slug]);\n  const fetchSpace = async () => {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('spaces').select('*').eq('slug', slug).single();\n      if (error) throw error;\n      setSpace(data);\n    } catch (error) {\n      console.error('Error fetching space:', error);\n      toast({\n        title: 'Space not found',\n        description: 'This collection link may be invalid.',\n        variant: 'destructive'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const startCamera = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'user'\n        },\n        audio: true\n      });\n      streamRef.current = stream;\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n      }\n    } catch (error) {\n      toast({\n        title: 'Camera access denied',\n        description: 'Please allow camera and microphone access to record a video.',\n        variant: 'destructive'\n      });\n      setStep('welcome');\n    }\n  };\n  const stopCamera = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n  };\n  const startRecording = () => {\n    if (!streamRef.current) return;\n    const mediaRecorder = new MediaRecorder(streamRef.current, {\n      mimeType: 'video/webm;codecs=vp9'\n    });\n    const chunks = [];\n    mediaRecorder.ondataavailable = e => {\n      if (e.data.size > 0) {\n        chunks.push(e.data);\n      }\n    };\n    mediaRecorder.onstop = () => {\n      const blob = new Blob(chunks, {\n        type: 'video/webm'\n      });\n      setRecordedBlob(blob);\n      setRecordedUrl(URL.createObjectURL(blob));\n    };\n    mediaRecorderRef.current = mediaRecorder;\n    mediaRecorder.start();\n    setIsRecording(true);\n    setRecordingTime(0);\n\n    // Timer\n    timerRef.current = setInterval(() => {\n      setRecordingTime(prev => {\n        if (prev >= 60) {\n          stopRecording();\n          return prev;\n        }\n        return prev + 1;\n      });\n    }, 1000);\n  };\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state !== 'inactive') {\n      mediaRecorderRef.current.stop();\n    }\n    setIsRecording(false);\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n    }\n  };\n  const retakeVideo = () => {\n    setRecordedBlob(null);\n    setRecordedUrl(null);\n    setRecordingTime(0);\n    startCamera();\n  };\n  const selectVideoType = () => {\n    setTestimonialType('video');\n    setStep('video');\n    setTimeout(startCamera, 100);\n  };\n  const selectTextType = () => {\n    setTestimonialType('text');\n    setStep('text');\n  };\n  const proceedToDetails = () => {\n    if (testimonialType === 'text' && !content.trim()) {\n      toast({\n        title: 'Please add your testimonial',\n        variant: 'destructive'\n      });\n      return;\n    }\n    if (testimonialType === 'video' && !recordedBlob) {\n      toast({\n        title: 'Please record a video',\n        variant: 'destructive'\n      });\n      return;\n    }\n    stopCamera();\n    setStep('details');\n  };\n  const submitTestimonial = async e => {\n    e.preventDefault();\n    if (!name.trim() || !email.trim()) {\n      toast({\n        title: 'Please fill in all fields',\n        variant: 'destructive'\n      });\n      return;\n    }\n    setSubmitting(true);\n    setStep('uploading');\n    try {\n      let videoUrl = null;\n\n      // Upload video if exists\n      if (testimonialType === 'video' && recordedBlob) {\n        const fileName = `${space.id}/${uuidv4()}.webm`;\n\n        // Simulate upload progress\n        const progressInterval = setInterval(() => {\n          setUploadProgress(prev => Math.min(prev + 10, 90));\n        }, 200);\n        const {\n          data: uploadData,\n          error: uploadError\n        } = await supabase.storage.from('videos').upload(fileName, recordedBlob, {\n          contentType: 'video/webm'\n        });\n        clearInterval(progressInterval);\n        setUploadProgress(100);\n        if (uploadError) throw uploadError;\n        const {\n          data: {\n            publicUrl\n          }\n        } = supabase.storage.from('videos').getPublicUrl(fileName);\n        videoUrl = publicUrl;\n      }\n\n      // Insert testimonial\n      const {\n        error: insertError\n      } = await supabase.from('testimonials').insert({\n        id: uuidv4(),\n        space_id: space.id,\n        type: testimonialType,\n        content: testimonialType === 'text' ? content : null,\n        video_url: videoUrl,\n        rating: space.collect_star_rating ? rating : null,\n        respondent_name: name,\n        respondent_email: email,\n        is_liked: false,\n        created_at: new Date().toISOString()\n      });\n      if (insertError) throw insertError;\n      setStep('success');\n\n      // Confetti!\n      confetti({\n        particleCount: 100,\n        spread: 70,\n        origin: {\n          y: 0.6\n        }\n      });\n    } catch (error) {\n      console.error('Error submitting:', error);\n      toast({\n        title: 'Submission failed',\n        description: 'Please try again.',\n        variant: 'destructive'\n      });\n      setStep('details');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-gradient-to-br from-violet-50 to-indigo-50 dark:from-violet-950/20 dark:to-indigo-950/20\",\n      \"x-file-name\": \"SubmitTestimonial\",\n      \"x-line-number\": \"277\",\n      \"x-component\": \"div\",\n      \"x-id\": \"SubmitTestimonial_277\",\n      \"x-dynamic\": \"false\",\n      children: /*#__PURE__*/_jsxDEV(Loader2, {\n        className: \"w-8 h-8 animate-spin text-violet-600\",\n        \"x-file-name\": \"SubmitTestimonial\",\n        \"x-line-number\": \"278\",\n        \"x-component\": \"Loader2\",\n        \"x-id\": \"SubmitTestimonial_278\",\n        \"x-dynamic\": \"false\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this);\n  }\n  if (!space) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-gradient-to-br from-violet-50 to-indigo-50 dark:from-violet-950/20 dark:to-indigo-950/20\",\n      \"x-file-name\": \"SubmitTestimonial\",\n      \"x-line-number\": \"285\",\n      \"x-component\": \"div\",\n      \"x-id\": \"SubmitTestimonial_285\",\n      \"x-dynamic\": \"false\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        \"x-file-name\": \"SubmitTestimonial\",\n        \"x-line-number\": \"286\",\n        \"x-component\": \"div\",\n        \"x-id\": \"SubmitTestimonial_286\",\n        \"x-dynamic\": \"false\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold mb-2\",\n          \"x-file-name\": \"SubmitTestimonial\",\n          \"x-line-number\": \"287\",\n          \"x-component\": \"h1\",\n          \"x-id\": \"SubmitTestimonial_287\",\n          \"x-dynamic\": \"false\",\n          children: \"Space Not Found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted-foreground\",\n          \"x-file-name\": \"SubmitTestimonial\",\n          \"x-line-number\": \"288\",\n          \"x-component\": \"p\",\n          \"x-id\": \"SubmitTestimonial_288\",\n          \"x-dynamic\": \"false\",\n          children: \"This collection link may be invalid.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-violet-50 via-white to-indigo-50 dark:from-violet-950/20 dark:via-background dark:to-indigo-950/20 flex items-center justify-center p-4\",\n    \"x-file-name\": \"SubmitTestimonial\",\n    \"x-line-number\": \"295\",\n    \"x-component\": \"div\",\n    \"x-id\": \"SubmitTestimonial_295\",\n    \"x-dynamic\": \"false\",\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"w-full max-w-md\",\n      initial: {\n        opacity: 0,\n        y: 20\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n        mode: \"wait\",\n        \"x-file-name\": \"SubmitTestimonial\",\n        \"x-line-number\": \"301\",\n        \"x-component\": \"AnimatePresence\",\n        \"x-id\": \"SubmitTestimonial_301\",\n        \"x-dynamic\": \"true\",\n        children: [step === 'welcome' && /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: 20\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0,\n            y: -20\n          },\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"overflow-hidden shadow-xl border-0\",\n            \"x-file-name\": \"SubmitTestimonial\",\n            \"x-line-number\": \"310\",\n            \"x-component\": \"Card\",\n            \"x-id\": \"SubmitTestimonial_310\",\n            \"x-dynamic\": \"true\",\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              className: \"p-8\",\n              \"x-file-name\": \"SubmitTestimonial\",\n              \"x-line-number\": \"311\",\n              \"x-component\": \"CardContent\",\n              \"x-id\": \"SubmitTestimonial_311\",\n              \"x-dynamic\": \"true\",\n              \"x-excluded\": \"true\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center mb-8\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"312\",\n                \"x-component\": \"div\",\n                \"x-id\": \"SubmitTestimonial_312\",\n                \"x-dynamic\": \"true\",\n                children: [space.logo_url ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: space.logo_url,\n                  alt: space.space_name,\n                  className: \"w-16 h-16 mx-auto mb-4 rounded-xl\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"314\",\n                  \"x-component\": \"img\",\n                  \"x-id\": \"SubmitTestimonial_314\",\n                  \"x-dynamic\": \"false\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-violet-600 to-indigo-600 rounded-2xl flex items-center justify-center\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"316\",\n                  \"x-component\": \"div\",\n                  \"x-id\": \"SubmitTestimonial_316\",\n                  \"x-dynamic\": \"false\",\n                  children: /*#__PURE__*/_jsxDEV(Heart, {\n                    className: \"w-8 h-8 text-white\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"317\",\n                    \"x-component\": \"Heart\",\n                    \"x-id\": \"SubmitTestimonial_317\",\n                    \"x-dynamic\": \"false\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"text-2xl font-bold mb-2\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"320\",\n                  \"x-component\": \"h1\",\n                  \"x-id\": \"SubmitTestimonial_320\",\n                  \"x-dynamic\": \"true\",\n                  children: space.header_title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-muted-foreground\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"321\",\n                  \"x-component\": \"p\",\n                  \"x-id\": \"SubmitTestimonial_321\",\n                  \"x-dynamic\": \"true\",\n                  children: space.custom_message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-3\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"324\",\n                \"x-component\": \"div\",\n                \"x-id\": \"SubmitTestimonial_324\",\n                \"x-dynamic\": \"false\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  onClick: selectVideoType,\n                  className: \"w-full h-14 text-lg bg-gradient-to-r from-violet-600 to-indigo-600 hover:from-violet-700 hover:to-indigo-700\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"325\",\n                  \"x-component\": \"Button\",\n                  \"x-id\": \"SubmitTestimonial_325\",\n                  \"x-dynamic\": \"false\",\n                  children: [/*#__PURE__*/_jsxDEV(Video, {\n                    className: \"w-5 h-5 mr-2\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"329\",\n                    \"x-component\": \"Video\",\n                    \"x-id\": \"SubmitTestimonial_329\",\n                    \"x-dynamic\": \"false\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 329,\n                    columnNumber: 23\n                  }, this), \"Record a Video\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: selectTextType,\n                  variant: \"outline\",\n                  className: \"w-full h-14 text-lg\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"332\",\n                  \"x-component\": \"Button\",\n                  \"x-id\": \"SubmitTestimonial_332\",\n                  \"x-dynamic\": \"false\",\n                  children: [/*#__PURE__*/_jsxDEV(FileText, {\n                    className: \"w-5 h-5 mr-2\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"337\",\n                    \"x-component\": \"FileText\",\n                    \"x-id\": \"SubmitTestimonial_337\",\n                    \"x-dynamic\": \"false\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 23\n                  }, this), \"Write Text\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 15\n          }, this)\n        }, \"welcome\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 13\n        }, this), step === 'video' && /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: 20\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0,\n            y: -20\n          },\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"overflow-hidden shadow-xl border-0\",\n            \"x-file-name\": \"SubmitTestimonial\",\n            \"x-line-number\": \"354\",\n            \"x-component\": \"Card\",\n            \"x-id\": \"SubmitTestimonial_354\",\n            \"x-dynamic\": \"true\",\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              className: \"p-6\",\n              \"x-file-name\": \"SubmitTestimonial\",\n              \"x-line-number\": \"355\",\n              \"x-component\": \"CardContent\",\n              \"x-id\": \"SubmitTestimonial_355\",\n              \"x-dynamic\": \"true\",\n              \"x-excluded\": \"true\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2 mb-4\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"356\",\n                \"x-component\": \"div\",\n                \"x-id\": \"SubmitTestimonial_356\",\n                \"x-dynamic\": \"false\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"ghost\",\n                  size: \"icon\",\n                  onClick: () => {\n                    stopCamera();\n                    setStep('welcome');\n                  },\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"357\",\n                  \"x-component\": \"Button\",\n                  \"x-id\": \"SubmitTestimonial_357\",\n                  \"x-dynamic\": \"true\",\n                  children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 358,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-lg font-semibold\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"360\",\n                  \"x-component\": \"h2\",\n                  \"x-id\": \"SubmitTestimonial_360\",\n                  \"x-dynamic\": \"false\",\n                  children: \"Record Your Video\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative aspect-[9/16] max-h-[400px] bg-black rounded-xl overflow-hidden mb-4\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"363\",\n                \"x-component\": \"div\",\n                \"x-id\": \"SubmitTestimonial_363\",\n                \"x-dynamic\": \"true\",\n                children: [recordedUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n                  src: recordedUrl,\n                  className: \"w-full h-full object-cover\",\n                  controls: true,\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"365\",\n                  \"x-component\": \"video\",\n                  \"x-id\": \"SubmitTestimonial_365\",\n                  \"x-dynamic\": \"false\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n                  ref: videoRef,\n                  autoPlay: true,\n                  muted: true,\n                  playsInline: true,\n                  className: \"w-full h-full object-cover mirror\",\n                  style: {\n                    transform: 'scaleX(-1)'\n                  },\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"371\",\n                  \"x-component\": \"video\",\n                  \"x-id\": \"SubmitTestimonial_371\",\n                  \"x-dynamic\": \"false\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 23\n                }, this), isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute top-4 left-4 flex items-center gap-2 bg-red-500 text-white px-3 py-1 rounded-full text-sm\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"382\",\n                  \"x-component\": \"div\",\n                  \"x-id\": \"SubmitTestimonial_382\",\n                  \"x-dynamic\": \"true\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"w-2 h-2 bg-white rounded-full animate-pulse\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"383\",\n                    \"x-component\": \"span\",\n                    \"x-id\": \"SubmitTestimonial_383\",\n                    \"x-dynamic\": \"false\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 383,\n                    columnNumber: 25\n                  }, this), formatTime(recordingTime), \" / 1:00\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-center gap-3\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"389\",\n                \"x-component\": \"div\",\n                \"x-id\": \"SubmitTestimonial_389\",\n                \"x-dynamic\": \"true\",\n                children: recordedUrl ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline\",\n                    onClick: retakeVideo,\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"392\",\n                    \"x-component\": \"Button\",\n                    \"x-id\": \"SubmitTestimonial_392\",\n                    \"x-dynamic\": \"false\",\n                    children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                      className: \"w-4 h-4 mr-2\",\n                      \"x-file-name\": \"SubmitTestimonial\",\n                      \"x-line-number\": \"393\",\n                      \"x-component\": \"RotateCcw\",\n                      \"x-id\": \"SubmitTestimonial_393\",\n                      \"x-dynamic\": \"false\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 393,\n                      columnNumber: 27\n                    }, this), \"Retake\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 392,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    onClick: proceedToDetails,\n                    className: \"bg-gradient-to-r from-violet-600 to-indigo-600\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"396\",\n                    \"x-component\": \"Button\",\n                    \"x-id\": \"SubmitTestimonial_396\",\n                    \"x-dynamic\": \"false\",\n                    children: \"Use This Video\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 396,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true) : isRecording ? /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: stopRecording,\n                  variant: \"destructive\",\n                  size: \"lg\",\n                  className: \"rounded-full w-16 h-16\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"404\",\n                  \"x-component\": \"Button\",\n                  \"x-id\": \"SubmitTestimonial_404\",\n                  \"x-dynamic\": \"true\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"w-6 h-6 bg-white rounded-sm\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"410\",\n                    \"x-component\": \"span\",\n                    \"x-id\": \"SubmitTestimonial_410\",\n                    \"x-dynamic\": \"false\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 410,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: startRecording,\n                  size: \"lg\",\n                  className: \"rounded-full w-16 h-16 bg-red-500 hover:bg-red-600\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"413\",\n                  \"x-component\": \"Button\",\n                  \"x-id\": \"SubmitTestimonial_413\",\n                  \"x-dynamic\": \"true\",\n                  children: /*#__PURE__*/_jsxDEV(Camera, {\n                    className: \"w-6 h-6\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"418\",\n                    \"x-component\": \"Camera\",\n                    \"x-id\": \"SubmitTestimonial_418\",\n                    \"x-dynamic\": \"false\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 418,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center text-sm text-muted-foreground mt-4\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"423\",\n                \"x-component\": \"p\",\n                \"x-id\": \"SubmitTestimonial_423\",\n                \"x-dynamic\": \"false\",\n                children: \"Maximum 60 seconds\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this)\n        }, \"video\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this), step === 'text' && /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: 20\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0,\n            y: -20\n          },\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"overflow-hidden shadow-xl border-0\",\n            \"x-file-name\": \"SubmitTestimonial\",\n            \"x-line-number\": \"439\",\n            \"x-component\": \"Card\",\n            \"x-id\": \"SubmitTestimonial_439\",\n            \"x-dynamic\": \"true\",\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              className: \"p-6\",\n              \"x-file-name\": \"SubmitTestimonial\",\n              \"x-line-number\": \"440\",\n              \"x-component\": \"CardContent\",\n              \"x-id\": \"SubmitTestimonial_440\",\n              \"x-dynamic\": \"true\",\n              \"x-excluded\": \"true\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2 mb-4\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"441\",\n                \"x-component\": \"div\",\n                \"x-id\": \"SubmitTestimonial_441\",\n                \"x-dynamic\": \"false\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"ghost\",\n                  size: \"icon\",\n                  onClick: () => setStep('welcome'),\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"442\",\n                  \"x-component\": \"Button\",\n                  \"x-id\": \"SubmitTestimonial_442\",\n                  \"x-dynamic\": \"true\",\n                  children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 443,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-lg font-semibold\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"445\",\n                  \"x-component\": \"h2\",\n                  \"x-id\": \"SubmitTestimonial_445\",\n                  \"x-dynamic\": \"false\",\n                  children: \"Write Your Testimonial\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 19\n              }, this), space.collect_star_rating && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-6\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"449\",\n                \"x-component\": \"div\",\n                \"x-id\": \"SubmitTestimonial_449\",\n                \"x-dynamic\": \"false\",\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  className: \"mb-2 block\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"450\",\n                  \"x-component\": \"Label\",\n                  \"x-id\": \"SubmitTestimonial_450\",\n                  \"x-dynamic\": \"false\",\n                  children: \"Your Rating\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-1\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"451\",\n                  \"x-component\": \"div\",\n                  \"x-id\": \"SubmitTestimonial_451\",\n                  \"x-dynamic\": \"true\",\n                  children: [1, 2, 3, 4, 5].map(star => /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => setRating(star),\n                    onMouseEnter: () => setHoverRating(star),\n                    onMouseLeave: () => setHoverRating(0),\n                    className: \"p-1 transition-transform hover:scale-110\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"453\",\n                    \"x-component\": \"button\",\n                    \"x-id\": \"SubmitTestimonial_453\",\n                    \"x-dynamic\": \"true\",\n                    children: /*#__PURE__*/_jsxDEV(Star, {\n                      className: `w-8 h-8 transition-colors ${star <= (hoverRating || rating) ? 'fill-yellow-400 text-yellow-400' : 'text-gray-300'}`,\n                      \"x-file-name\": \"SubmitTestimonial\",\n                      \"x-line-number\": \"461\",\n                      \"x-component\": \"Star\",\n                      \"x-id\": \"SubmitTestimonial_461\",\n                      \"x-dynamic\": \"true\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 461,\n                      columnNumber: 29\n                    }, this)\n                  }, star, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 453,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-4\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"474\",\n                \"x-component\": \"div\",\n                \"x-id\": \"SubmitTestimonial_474\",\n                \"x-dynamic\": \"false\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"475\",\n                  \"x-component\": \"div\",\n                  \"x-id\": \"SubmitTestimonial_475\",\n                  \"x-dynamic\": \"false\",\n                  children: [/*#__PURE__*/_jsxDEV(Label, {\n                    htmlFor: \"content\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"476\",\n                    \"x-component\": \"Label\",\n                    \"x-id\": \"SubmitTestimonial_476\",\n                    \"x-dynamic\": \"false\",\n                    children: \"Your Testimonial\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 476,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n                    id: \"content\",\n                    value: content,\n                    onChange: e => setContent(e.target.value),\n                    placeholder: \"Share your experience...\",\n                    rows: 5,\n                    className: \"mt-2\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"477\",\n                    \"x-component\": \"Textarea\",\n                    \"x-id\": \"SubmitTestimonial_477\",\n                    \"x-dynamic\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 477,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: proceedToDetails,\n                  className: \"w-full bg-gradient-to-r from-violet-600 to-indigo-600\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"487\",\n                  \"x-component\": \"Button\",\n                  \"x-id\": \"SubmitTestimonial_487\",\n                  \"x-dynamic\": \"false\",\n                  children: \"Continue\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 15\n          }, this)\n        }, \"text\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 13\n        }, this), step === 'details' && /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: 20\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0,\n            y: -20\n          },\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"overflow-hidden shadow-xl border-0\",\n            \"x-file-name\": \"SubmitTestimonial\",\n            \"x-line-number\": \"507\",\n            \"x-component\": \"Card\",\n            \"x-id\": \"SubmitTestimonial_507\",\n            \"x-dynamic\": \"true\",\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              className: \"p-6\",\n              \"x-file-name\": \"SubmitTestimonial\",\n              \"x-line-number\": \"508\",\n              \"x-component\": \"CardContent\",\n              \"x-id\": \"SubmitTestimonial_508\",\n              \"x-dynamic\": \"true\",\n              \"x-excluded\": \"true\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2 mb-4\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"509\",\n                \"x-component\": \"div\",\n                \"x-id\": \"SubmitTestimonial_509\",\n                \"x-dynamic\": \"false\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"ghost\",\n                  size: \"icon\",\n                  onClick: () => setStep(testimonialType === 'video' ? 'video' : 'text'),\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"510\",\n                  \"x-component\": \"Button\",\n                  \"x-id\": \"SubmitTestimonial_510\",\n                  \"x-dynamic\": \"true\",\n                  children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 515,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 510,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-lg font-semibold\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"517\",\n                  \"x-component\": \"h2\",\n                  \"x-id\": \"SubmitTestimonial_517\",\n                  \"x-dynamic\": \"false\",\n                  children: \"Your Details\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 517,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: submitTestimonial,\n                className: \"space-y-4\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"520\",\n                \"x-component\": \"form\",\n                \"x-id\": \"SubmitTestimonial_520\",\n                \"x-dynamic\": \"false\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"521\",\n                  \"x-component\": \"div\",\n                  \"x-id\": \"SubmitTestimonial_521\",\n                  \"x-dynamic\": \"false\",\n                  children: [/*#__PURE__*/_jsxDEV(Label, {\n                    htmlFor: \"name\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"522\",\n                    \"x-component\": \"Label\",\n                    \"x-id\": \"SubmitTestimonial_522\",\n                    \"x-dynamic\": \"false\",\n                    children: \"Your Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 522,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Input, {\n                    id: \"name\",\n                    value: name,\n                    onChange: e => setName(e.target.value),\n                    placeholder: \"John Doe\",\n                    required: true,\n                    className: \"mt-2\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"523\",\n                    \"x-component\": \"Input\",\n                    \"x-id\": \"SubmitTestimonial_523\",\n                    \"x-dynamic\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 523,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 521,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"533\",\n                  \"x-component\": \"div\",\n                  \"x-id\": \"SubmitTestimonial_533\",\n                  \"x-dynamic\": \"false\",\n                  children: [/*#__PURE__*/_jsxDEV(Label, {\n                    htmlFor: \"email\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"534\",\n                    \"x-component\": \"Label\",\n                    \"x-id\": \"SubmitTestimonial_534\",\n                    \"x-dynamic\": \"false\",\n                    children: \"Your Email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 534,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Input, {\n                    id: \"email\",\n                    type: \"email\",\n                    value: email,\n                    onChange: e => setEmail(e.target.value),\n                    placeholder: \"john@example.com\",\n                    required: true,\n                    className: \"mt-2\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"535\",\n                    \"x-component\": \"Input\",\n                    \"x-id\": \"SubmitTestimonial_535\",\n                    \"x-dynamic\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 535,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-muted-foreground mt-1\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"544\",\n                    \"x-component\": \"p\",\n                    \"x-id\": \"SubmitTestimonial_544\",\n                    \"x-dynamic\": \"false\",\n                    children: \"Your email won't be displayed publicly\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 544,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  disabled: submitting,\n                  className: \"w-full bg-gradient-to-r from-violet-600 to-indigo-600\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"549\",\n                  \"x-component\": \"Button\",\n                  \"x-id\": \"SubmitTestimonial_549\",\n                  \"x-dynamic\": \"true\",\n                  children: [submitting && /*#__PURE__*/_jsxDEV(Loader2, {\n                    className: \"w-4 h-4 mr-2 animate-spin\",\n                    \"x-file-name\": \"SubmitTestimonial\",\n                    \"x-line-number\": \"554\",\n                    \"x-component\": \"Loader2\",\n                    \"x-id\": \"SubmitTestimonial_554\",\n                    \"x-dynamic\": \"false\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 554,\n                    columnNumber: 38\n                  }, this), \"Submit Testimonial\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 549,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 520,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 15\n          }, this)\n        }, \"details\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 13\n        }, this), step === 'uploading' && /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: 20\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0,\n            y: -20\n          },\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"overflow-hidden shadow-xl border-0\",\n            \"x-file-name\": \"SubmitTestimonial\",\n            \"x-line-number\": \"571\",\n            \"x-component\": \"Card\",\n            \"x-id\": \"SubmitTestimonial_571\",\n            \"x-dynamic\": \"true\",\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              className: \"p-8 text-center\",\n              \"x-file-name\": \"SubmitTestimonial\",\n              \"x-line-number\": \"572\",\n              \"x-component\": \"CardContent\",\n              \"x-id\": \"SubmitTestimonial_572\",\n              \"x-dynamic\": \"true\",\n              \"x-excluded\": \"true\",\n              children: [/*#__PURE__*/_jsxDEV(Upload, {\n                className: \"w-12 h-12 mx-auto text-violet-600 mb-4 animate-bounce\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"573\",\n                \"x-component\": \"Upload\",\n                \"x-id\": \"SubmitTestimonial_573\",\n                \"x-dynamic\": \"false\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-lg font-semibold mb-2\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"574\",\n                \"x-component\": \"h2\",\n                \"x-id\": \"SubmitTestimonial_574\",\n                \"x-dynamic\": \"false\",\n                children: \"Uploading...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Progress, {\n                value: uploadProgress,\n                className: \"mb-2\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"575\",\n                \"x-component\": \"Progress\",\n                \"x-id\": \"SubmitTestimonial_575\",\n                \"x-dynamic\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-muted-foreground\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"576\",\n                \"x-component\": \"p\",\n                \"x-id\": \"SubmitTestimonial_576\",\n                \"x-dynamic\": \"true\",\n                children: [uploadProgress, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 15\n          }, this)\n        }, \"uploading\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 13\n        }, this), step === 'success' && /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            scale: 0.95\n          },\n          animate: {\n            opacity: 1,\n            scale: 1\n          },\n          exit: {\n            opacity: 0,\n            scale: 0.95\n          },\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"overflow-hidden shadow-xl border-0\",\n            \"x-file-name\": \"SubmitTestimonial\",\n            \"x-line-number\": \"590\",\n            \"x-component\": \"Card\",\n            \"x-id\": \"SubmitTestimonial_590\",\n            \"x-dynamic\": \"true\",\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              className: \"p-8 text-center\",\n              \"x-file-name\": \"SubmitTestimonial\",\n              \"x-line-number\": \"591\",\n              \"x-component\": \"CardContent\",\n              \"x-id\": \"SubmitTestimonial_591\",\n              \"x-dynamic\": \"true\",\n              \"x-excluded\": \"true\",\n              children: [/*#__PURE__*/_jsxDEV(motion.div, {\n                initial: {\n                  scale: 0\n                },\n                animate: {\n                  scale: 1\n                },\n                transition: {\n                  type: 'spring',\n                  delay: 0.2\n                },\n                children: /*#__PURE__*/_jsxDEV(CheckCircle, {\n                  className: \"w-16 h-16 mx-auto text-green-500 mb-4\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"597\",\n                  \"x-component\": \"CheckCircle\",\n                  \"x-id\": \"SubmitTestimonial_597\",\n                  \"x-dynamic\": \"false\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 597,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-2xl font-bold mb-2\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"599\",\n                \"x-component\": \"h2\",\n                \"x-id\": \"SubmitTestimonial_599\",\n                \"x-dynamic\": \"false\",\n                children: \"Thank You!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 599,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-muted-foreground mb-6\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"600\",\n                \"x-component\": \"p\",\n                \"x-id\": \"SubmitTestimonial_600\",\n                \"x-dynamic\": \"false\",\n                children: \"Your testimonial has been submitted successfully.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 600,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-4 bg-violet-50 dark:bg-violet-900/20 rounded-lg\",\n                \"x-file-name\": \"SubmitTestimonial\",\n                \"x-line-number\": \"603\",\n                \"x-component\": \"div\",\n                \"x-id\": \"SubmitTestimonial_603\",\n                \"x-dynamic\": \"false\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"604\",\n                  \"x-component\": \"p\",\n                  \"x-id\": \"SubmitTestimonial_604\",\n                  \"x-dynamic\": \"false\",\n                  children: \"Want to collect testimonials like this?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/\",\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  className: \"text-violet-600 font-medium hover:underline\",\n                  \"x-file-name\": \"SubmitTestimonial\",\n                  \"x-line-number\": \"607\",\n                  \"x-component\": \"a\",\n                  \"x-id\": \"SubmitTestimonial_607\",\n                  \"x-dynamic\": \"false\",\n                  children: \"Create your own Wall of Love \\u2192\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 607,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 603,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 15\n          }, this)\n        }, \"success\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mt-6\",\n        \"x-file-name\": \"SubmitTestimonial\",\n        \"x-line-number\": \"623\",\n        \"x-component\": \"div\",\n        \"x-id\": \"SubmitTestimonial_623\",\n        \"x-dynamic\": \"false\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/\",\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          className: \"text-sm text-muted-foreground hover:text-foreground transition-colors\",\n          \"x-file-name\": \"SubmitTestimonial\",\n          \"x-line-number\": \"624\",\n          \"x-component\": \"a\",\n          \"x-id\": \"SubmitTestimonial_624\",\n          \"x-dynamic\": \"false\",\n          children: [\"Powered by \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium text-violet-600\",\n            \"x-file-name\": \"SubmitTestimonial\",\n            \"x-line-number\": \"630\",\n            \"x-component\": \"span\",\n            \"x-id\": \"SubmitTestimonial_630\",\n            \"x-dynamic\": \"false\",\n            children: \"TrustFlow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 24\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 295,\n    columnNumber: 5\n  }, this);\n};\n_s(SubmitTestimonial, \"V0Te97BH4a7Xa2H5dciEgDYBPYU=\", false, function () {\n  return [useParams, useToast];\n});\n_c = SubmitTestimonial;\nexport default SubmitTestimonial;\nvar _c;\n$RefreshReg$(_c, \"SubmitTestimonial\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","motion","AnimatePresence","Button","Input","Label","Textarea","Card","CardContent","Progress","supabase","Heart","Video","FileText","Star","Loader2","CheckCircle","Camera","RotateCcw","Upload","ArrowLeft","useToast","v4","uuidv4","confetti","jsxDEV","_jsxDEV","Fragment","_Fragment","SubmitTestimonial","_s","slug","space","setSpace","loading","setLoading","step","setStep","testimonialType","setTestimonialType","rating","setRating","hoverRating","setHoverRating","content","setContent","name","setName","email","setEmail","submitting","setSubmitting","uploadProgress","setUploadProgress","toast","isRecording","setIsRecording","recordedBlob","setRecordedBlob","recordedUrl","setRecordedUrl","recordingTime","setRecordingTime","videoRef","mediaRecorderRef","streamRef","timerRef","fetchSpace","current","getTracks","forEach","track","stop","clearInterval","data","error","from","select","eq","single","console","title","description","variant","startCamera","stream","navigator","mediaDevices","getUserMedia","video","facingMode","audio","srcObject","stopCamera","startRecording","mediaRecorder","MediaRecorder","mimeType","chunks","ondataavailable","e","size","push","onstop","blob","Blob","type","URL","createObjectURL","start","setInterval","prev","stopRecording","state","retakeVideo","selectVideoType","setTimeout","selectTextType","proceedToDetails","trim","submitTestimonial","preventDefault","videoUrl","fileName","id","progressInterval","Math","min","uploadData","uploadError","storage","upload","contentType","publicUrl","getPublicUrl","insertError","insert","space_id","video_url","collect_star_rating","respondent_name","respondent_email","is_liked","created_at","Date","toISOString","particleCount","spread","origin","y","formatTime","seconds","mins","floor","secs","toString","padStart","className","children","_jsxFileName","lineNumber","columnNumber","div","initial","opacity","animate","mode","exit","logo_url","src","alt","space_name","header_title","custom_message","onClick","controls","ref","autoPlay","muted","playsInline","style","transform","map","star","onMouseEnter","onMouseLeave","htmlFor","value","onChange","target","placeholder","rows","onSubmit","required","disabled","scale","transition","delay","href","rel","_c","$RefreshReg$"],"sources":["/workspaces/TrustFlow-App/frontend/src/pages/SubmitTestimonial.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { supabase } from '@/lib/supabase';\nimport { Heart, Video, FileText, Star, Loader2, CheckCircle, Camera, RotateCcw, Upload, ArrowLeft } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { v4 as uuidv4 } from 'uuid';\nimport confetti from 'canvas-confetti';\n\nconst SubmitTestimonial = () => {\n  const { slug } = useParams();\n  const [space, setSpace] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [step, setStep] = useState('welcome'); // welcome, video, text, details, uploading, success\n  const [testimonialType, setTestimonialType] = useState(null);\n  const [rating, setRating] = useState(5);\n  const [hoverRating, setHoverRating] = useState(0);\n  const [content, setContent] = useState('');\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const { toast } = useToast();\n\n  // Video recording state\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordedBlob, setRecordedBlob] = useState(null);\n  const [recordedUrl, setRecordedUrl] = useState(null);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const videoRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const streamRef = useRef(null);\n  const timerRef = useRef(null);\n\n  useEffect(() => {\n    fetchSpace();\n    return () => {\n      // Cleanup camera on unmount\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach(track => track.stop());\n      }\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [slug]);\n\n  const fetchSpace = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('spaces')\n        .select('*')\n        .eq('slug', slug)\n        .single();\n\n      if (error) throw error;\n      setSpace(data);\n    } catch (error) {\n      console.error('Error fetching space:', error);\n      toast({\n        title: 'Space not found',\n        description: 'This collection link may be invalid.',\n        variant: 'destructive',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const startCamera = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        video: { facingMode: 'user' },\n        audio: true \n      });\n      streamRef.current = stream;\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n      }\n    } catch (error) {\n      toast({\n        title: 'Camera access denied',\n        description: 'Please allow camera and microphone access to record a video.',\n        variant: 'destructive',\n      });\n      setStep('welcome');\n    }\n  };\n\n  const stopCamera = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n  };\n\n  const startRecording = () => {\n    if (!streamRef.current) return;\n\n    const mediaRecorder = new MediaRecorder(streamRef.current, {\n      mimeType: 'video/webm;codecs=vp9'\n    });\n    const chunks = [];\n\n    mediaRecorder.ondataavailable = (e) => {\n      if (e.data.size > 0) {\n        chunks.push(e.data);\n      }\n    };\n\n    mediaRecorder.onstop = () => {\n      const blob = new Blob(chunks, { type: 'video/webm' });\n      setRecordedBlob(blob);\n      setRecordedUrl(URL.createObjectURL(blob));\n    };\n\n    mediaRecorderRef.current = mediaRecorder;\n    mediaRecorder.start();\n    setIsRecording(true);\n    setRecordingTime(0);\n\n    // Timer\n    timerRef.current = setInterval(() => {\n      setRecordingTime(prev => {\n        if (prev >= 60) {\n          stopRecording();\n          return prev;\n        }\n        return prev + 1;\n      });\n    }, 1000);\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state !== 'inactive') {\n      mediaRecorderRef.current.stop();\n    }\n    setIsRecording(false);\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n    }\n  };\n\n  const retakeVideo = () => {\n    setRecordedBlob(null);\n    setRecordedUrl(null);\n    setRecordingTime(0);\n    startCamera();\n  };\n\n  const selectVideoType = () => {\n    setTestimonialType('video');\n    setStep('video');\n    setTimeout(startCamera, 100);\n  };\n\n  const selectTextType = () => {\n    setTestimonialType('text');\n    setStep('text');\n  };\n\n  const proceedToDetails = () => {\n    if (testimonialType === 'text' && !content.trim()) {\n      toast({\n        title: 'Please add your testimonial',\n        variant: 'destructive',\n      });\n      return;\n    }\n    if (testimonialType === 'video' && !recordedBlob) {\n      toast({\n        title: 'Please record a video',\n        variant: 'destructive',\n      });\n      return;\n    }\n    stopCamera();\n    setStep('details');\n  };\n\n  const submitTestimonial = async (e) => {\n    e.preventDefault();\n    if (!name.trim() || !email.trim()) {\n      toast({\n        title: 'Please fill in all fields',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    setSubmitting(true);\n    setStep('uploading');\n\n    try {\n      let videoUrl = null;\n\n      // Upload video if exists\n      if (testimonialType === 'video' && recordedBlob) {\n        const fileName = `${space.id}/${uuidv4()}.webm`;\n        \n        // Simulate upload progress\n        const progressInterval = setInterval(() => {\n          setUploadProgress(prev => Math.min(prev + 10, 90));\n        }, 200);\n\n        const { data: uploadData, error: uploadError } = await supabase.storage\n          .from('videos')\n          .upload(fileName, recordedBlob, {\n            contentType: 'video/webm',\n          });\n\n        clearInterval(progressInterval);\n        setUploadProgress(100);\n\n        if (uploadError) throw uploadError;\n\n        const { data: { publicUrl } } = supabase.storage\n          .from('videos')\n          .getPublicUrl(fileName);\n        \n        videoUrl = publicUrl;\n      }\n\n      // Insert testimonial\n      const { error: insertError } = await supabase\n        .from('testimonials')\n        .insert({\n          id: uuidv4(),\n          space_id: space.id,\n          type: testimonialType,\n          content: testimonialType === 'text' ? content : null,\n          video_url: videoUrl,\n          rating: space.collect_star_rating ? rating : null,\n          respondent_name: name,\n          respondent_email: email,\n          is_liked: false,\n          created_at: new Date().toISOString(),\n        });\n\n      if (insertError) throw insertError;\n\n      setStep('success');\n      \n      // Confetti!\n      confetti({\n        particleCount: 100,\n        spread: 70,\n        origin: { y: 0.6 }\n      });\n    } catch (error) {\n      console.error('Error submitting:', error);\n      toast({\n        title: 'Submission failed',\n        description: 'Please try again.',\n        variant: 'destructive',\n      });\n      setStep('details');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-violet-50 to-indigo-50 dark:from-violet-950/20 dark:to-indigo-950/20\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-violet-600\" />\n      </div>\n    );\n  }\n\n  if (!space) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-violet-50 to-indigo-50 dark:from-violet-950/20 dark:to-indigo-950/20\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold mb-2\">Space Not Found</h1>\n          <p className=\"text-muted-foreground\">This collection link may be invalid.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-violet-50 via-white to-indigo-50 dark:from-violet-950/20 dark:via-background dark:to-indigo-950/20 flex items-center justify-center p-4\">\n      <motion.div \n        className=\"w-full max-w-md\"\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n      >\n        <AnimatePresence mode=\"wait\">\n          {/* Welcome Step */}\n          {step === 'welcome' && (\n            <motion.div\n              key=\"welcome\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n            >\n              <Card className=\"overflow-hidden shadow-xl border-0\">\n                <CardContent className=\"p-8\">\n                  <div className=\"text-center mb-8\">\n                    {space.logo_url ? (\n                      <img src={space.logo_url} alt={space.space_name} className=\"w-16 h-16 mx-auto mb-4 rounded-xl\" />\n                    ) : (\n                      <div className=\"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-violet-600 to-indigo-600 rounded-2xl flex items-center justify-center\">\n                        <Heart className=\"w-8 h-8 text-white\" />\n                      </div>\n                    )}\n                    <h1 className=\"text-2xl font-bold mb-2\">{space.header_title}</h1>\n                    <p className=\"text-muted-foreground\">{space.custom_message}</p>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <Button \n                      onClick={selectVideoType}\n                      className=\"w-full h-14 text-lg bg-gradient-to-r from-violet-600 to-indigo-600 hover:from-violet-700 hover:to-indigo-700\"\n                    >\n                      <Video className=\"w-5 h-5 mr-2\" />\n                      Record a Video\n                    </Button>\n                    <Button \n                      onClick={selectTextType}\n                      variant=\"outline\"\n                      className=\"w-full h-14 text-lg\"\n                    >\n                      <FileText className=\"w-5 h-5 mr-2\" />\n                      Write Text\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          )}\n\n          {/* Video Recording Step */}\n          {step === 'video' && (\n            <motion.div\n              key=\"video\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n            >\n              <Card className=\"overflow-hidden shadow-xl border-0\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center gap-2 mb-4\">\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => { stopCamera(); setStep('welcome'); }}>\n                      <ArrowLeft className=\"w-5 h-5\" />\n                    </Button>\n                    <h2 className=\"text-lg font-semibold\">Record Your Video</h2>\n                  </div>\n\n                  <div className=\"relative aspect-[9/16] max-h-[400px] bg-black rounded-xl overflow-hidden mb-4\">\n                    {recordedUrl ? (\n                      <video \n                        src={recordedUrl} \n                        className=\"w-full h-full object-cover\"\n                        controls\n                      />\n                    ) : (\n                      <video \n                        ref={videoRef}\n                        autoPlay \n                        muted \n                        playsInline\n                        className=\"w-full h-full object-cover mirror\"\n                        style={{ transform: 'scaleX(-1)' }}\n                      />\n                    )}\n                    \n                    {isRecording && (\n                      <div className=\"absolute top-4 left-4 flex items-center gap-2 bg-red-500 text-white px-3 py-1 rounded-full text-sm\">\n                        <span className=\"w-2 h-2 bg-white rounded-full animate-pulse\" />\n                        {formatTime(recordingTime)} / 1:00\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"flex justify-center gap-3\">\n                    {recordedUrl ? (\n                      <>\n                        <Button variant=\"outline\" onClick={retakeVideo}>\n                          <RotateCcw className=\"w-4 h-4 mr-2\" />\n                          Retake\n                        </Button>\n                        <Button \n                          onClick={proceedToDetails}\n                          className=\"bg-gradient-to-r from-violet-600 to-indigo-600\"\n                        >\n                          Use This Video\n                        </Button>\n                      </>\n                    ) : isRecording ? (\n                      <Button \n                        onClick={stopRecording}\n                        variant=\"destructive\"\n                        size=\"lg\"\n                        className=\"rounded-full w-16 h-16\"\n                      >\n                        <span className=\"w-6 h-6 bg-white rounded-sm\" />\n                      </Button>\n                    ) : (\n                      <Button \n                        onClick={startRecording}\n                        size=\"lg\"\n                        className=\"rounded-full w-16 h-16 bg-red-500 hover:bg-red-600\"\n                      >\n                        <Camera className=\"w-6 h-6\" />\n                      </Button>\n                    )}\n                  </div>\n                  \n                  <p className=\"text-center text-sm text-muted-foreground mt-4\">\n                    Maximum 60 seconds\n                  </p>\n                </CardContent>\n              </Card>\n            </motion.div>\n          )}\n\n          {/* Text Step */}\n          {step === 'text' && (\n            <motion.div\n              key=\"text\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n            >\n              <Card className=\"overflow-hidden shadow-xl border-0\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center gap-2 mb-4\">\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => setStep('welcome')}>\n                      <ArrowLeft className=\"w-5 h-5\" />\n                    </Button>\n                    <h2 className=\"text-lg font-semibold\">Write Your Testimonial</h2>\n                  </div>\n\n                  {space.collect_star_rating && (\n                    <div className=\"mb-6\">\n                      <Label className=\"mb-2 block\">Your Rating</Label>\n                      <div className=\"flex gap-1\">\n                        {[1, 2, 3, 4, 5].map((star) => (\n                          <button\n                            key={star}\n                            type=\"button\"\n                            onClick={() => setRating(star)}\n                            onMouseEnter={() => setHoverRating(star)}\n                            onMouseLeave={() => setHoverRating(0)}\n                            className=\"p-1 transition-transform hover:scale-110\"\n                          >\n                            <Star \n                              className={`w-8 h-8 transition-colors ${\n                                star <= (hoverRating || rating) \n                                  ? 'fill-yellow-400 text-yellow-400' \n                                  : 'text-gray-300'\n                              }`} \n                            />\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  <div className=\"space-y-4\">\n                    <div>\n                      <Label htmlFor=\"content\">Your Testimonial</Label>\n                      <Textarea\n                        id=\"content\"\n                        value={content}\n                        onChange={(e) => setContent(e.target.value)}\n                        placeholder=\"Share your experience...\"\n                        rows={5}\n                        className=\"mt-2\"\n                      />\n                    </div>\n\n                    <Button \n                      onClick={proceedToDetails}\n                      className=\"w-full bg-gradient-to-r from-violet-600 to-indigo-600\"\n                    >\n                      Continue\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          )}\n\n          {/* Details Step */}\n          {step === 'details' && (\n            <motion.div\n              key=\"details\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n            >\n              <Card className=\"overflow-hidden shadow-xl border-0\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center gap-2 mb-4\">\n                    <Button \n                      variant=\"ghost\" \n                      size=\"icon\" \n                      onClick={() => setStep(testimonialType === 'video' ? 'video' : 'text')}\n                    >\n                      <ArrowLeft className=\"w-5 h-5\" />\n                    </Button>\n                    <h2 className=\"text-lg font-semibold\">Your Details</h2>\n                  </div>\n\n                  <form onSubmit={submitTestimonial} className=\"space-y-4\">\n                    <div>\n                      <Label htmlFor=\"name\">Your Name</Label>\n                      <Input\n                        id=\"name\"\n                        value={name}\n                        onChange={(e) => setName(e.target.value)}\n                        placeholder=\"John Doe\"\n                        required\n                        className=\"mt-2\"\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"email\">Your Email</Label>\n                      <Input\n                        id=\"email\"\n                        type=\"email\"\n                        value={email}\n                        onChange={(e) => setEmail(e.target.value)}\n                        placeholder=\"john@example.com\"\n                        required\n                        className=\"mt-2\"\n                      />\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        Your email won't be displayed publicly\n                      </p>\n                    </div>\n\n                    <Button \n                      type=\"submit\"\n                      disabled={submitting}\n                      className=\"w-full bg-gradient-to-r from-violet-600 to-indigo-600\"\n                    >\n                      {submitting && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                      Submit Testimonial\n                    </Button>\n                  </form>\n                </CardContent>\n              </Card>\n            </motion.div>\n          )}\n\n          {/* Uploading Step */}\n          {step === 'uploading' && (\n            <motion.div\n              key=\"uploading\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n            >\n              <Card className=\"overflow-hidden shadow-xl border-0\">\n                <CardContent className=\"p-8 text-center\">\n                  <Upload className=\"w-12 h-12 mx-auto text-violet-600 mb-4 animate-bounce\" />\n                  <h2 className=\"text-lg font-semibold mb-2\">Uploading...</h2>\n                  <Progress value={uploadProgress} className=\"mb-2\" />\n                  <p className=\"text-sm text-muted-foreground\">{uploadProgress}%</p>\n                </CardContent>\n              </Card>\n            </motion.div>\n          )}\n\n          {/* Success Step */}\n          {step === 'success' && (\n            <motion.div\n              key=\"success\"\n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.95 }}\n            >\n              <Card className=\"overflow-hidden shadow-xl border-0\">\n                <CardContent className=\"p-8 text-center\">\n                  <motion.div\n                    initial={{ scale: 0 }}\n                    animate={{ scale: 1 }}\n                    transition={{ type: 'spring', delay: 0.2 }}\n                  >\n                    <CheckCircle className=\"w-16 h-16 mx-auto text-green-500 mb-4\" />\n                  </motion.div>\n                  <h2 className=\"text-2xl font-bold mb-2\">Thank You!</h2>\n                  <p className=\"text-muted-foreground mb-6\">\n                    Your testimonial has been submitted successfully.\n                  </p>\n                  <div className=\"p-4 bg-violet-50 dark:bg-violet-900/20 rounded-lg\">\n                    <p className=\"text-sm\">\n                      Want to collect testimonials like this?\n                    </p>\n                    <a \n                      href=\"/\" \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\"\n                      className=\"text-violet-600 font-medium hover:underline\"\n                    >\n                      Create your own Wall of Love \n                    </a>\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Powered by */}\n        <div className=\"text-center mt-6\">\n          <a \n            href=\"/\" \n            target=\"_blank\" \n            rel=\"noopener noreferrer\"\n            className=\"text-sm text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            Powered by <span className=\"font-medium text-violet-600\">TrustFlow</span>\n          </a>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\nexport default SubmitTestimonial;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}